var loginForm=document.getElementById("LoginForm");for(me=0;me<loginForm.length;me++){var el=loginForm.elements[me];"text"!=el.type&&"Password"!=el.type||(el.onkeypress=function(){document.getElementById("ErrMsg").innerHTML=""},"text"==el.type&&(el.onblur=function(){this.value=this.value.trim()}))}function f1(){var e=new FormData;e.append("Username",loginForm.Username.value),e.append("Password",loginForm.Password.value);var n=new XMLHttpRequest;return n.onreadystatechange=function(){4==this.readyState&&200==this.status&&(1==this.response?window.location.href="./Profile.php":document.getElementById("ErrMsg").innerHTML="ชื่อผู้ใช้/รหัสผ่านไม่ถูกต้อง")},n.open("POST","function/login.php",!0),n.send(e),!1}function chUserID(e=0,n){var t=new XMLHttpRequest,r=document.getElementById("Pwd"),o=document.getElementById("Userid"),a=(document.getElementById("Pwd1"),new FormData);a.append("UserID",e),t.onreadystatechange=function(){4==this.readyState&&200==this.status&&(data=this.responseText,drr=data.split(String.fromCharCode(5)),1!=n?1==drr[0]?(r.innerHTML=drr[1],o.readOnly=!0):popupalert(2,"ผิดพลาด","ไม่พบข้อมูลผู้ใช้งานอยู่ในระบบ"):(r.innerHTML="",o.innerText="",o.readOnly=!1))},t.open("POST","./function/forgotPwdform.php",!0),t.send(a)}function confPwd(){var e=document.getElementById("Pwd1").value;if(e!=document.getElementById("Pwd2").value)return popupalert(3,"เช็ครหัส","ข้อมูลรหัสผ่านไม่ตรงกัน"),!1;SavePwd(e)}function SavePwd(e){var n=new XMLHttpRequest,t=new FormData;return t.append("Pwd",e),t.append("Uid",document.getElementById("Userid").value),n.onreadystatechange=function(){if(4==this.readyState&&200==this.status){if(data=this.responseText,1!=data)return popupalert(2,"ผิดพลาด","รีเซ็ตข้อมูลรหัสผ่านไม่สำเร็จ"),console.log(data),!1;chUserID(0,1),popupalert(1,"สำเร็จ","รีเซ็ตข้อมูลรหัสผ่านแล้ว")}},n.open("POST","./form/SavePwd.php",!0),n.send(t),!1}loginForm.onsubmit=function(){return ErrMsg=document.getElementById("ErrMsg"),""==loginForm.Username.value.trim()?(ErrMsg.innerHTML='กรุณาระบุ "รหัสผู้ใช"้',loginForm.Username.focus(),!1):""==loginForm.Password.value.trim()?(ErrMsg.innerHTML='กรุณาระบุ "รหัสผ่าน"',loginForm.Password.focus(),!1):(f1(),!1)};